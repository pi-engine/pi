<?php
// User data
$user = $comment['user'];
// Count
$count = $comment['count'];
// Comment list generated by comment module:
// id, time, content, user
// uid, name, avatar, profile_url, IP
$posts = $comment['posts'];
// Pagination object
$paginator = $comment['paginator'];
?>
<?php echo $this->tab($tabs); ?>

    <div class="pi-comment-header">
        <dl><?php echo _escape($comment['title']); ?></dl>
        <dl class="dl-horizontal">
            <dt><?php _e('Total:') ?></dt>
            <dd><?php echo $count; ?></dd>
            <dt><?php _e('User:') ?></dt>
            <dd><a href="<?php echo $user['url']; ?>" target="_blank" title="<?php echo _escape($user['name']); ?>">
                <?php echo _escape($user['name']); ?>
                </a>
            </dd>
            <dt>&nbsp;</dt>
            <dd><?php echo $user['avatar']; ?></dd>
        </dl>
    </div>
    <div class="pi-comment-list">
<?php
if ($posts) {
    foreach ($posts as $post) {
?>
        <dl class="dl-horizontal pi-comment-post">
            <dt><?php _e('Source:') ?></dt>
            <dd><a href="<?php echo $post['target']['url']; ?>" target="_blank" title="<?php echo _escape($post['target']['title']); ?>">
                    <?php echo _escape($post['target']['title']); ?>
                </a>
            </dd>

            <dt><?php _e('IP:'); ?></dt>
            <dd><?php echo $post['ip']; ?></dd>

            <dt><?php _e('Time:');?></dt>
            <dd><?php echo _date($post['time']); ?></dd>

            <dt><?php _e('Content:');?></dt>
            <dd><?php echo $post['content']; ?></dd>

            <dt><?php _e('Operations:'); ?></dt>
            <dd>
                <?php foreach ($post['operations'] as $key => $op) { ?>
                    <a href="<?php echo $op['url']; ?>" title="<?php echo _escape($op['title']); ?>" target="_blank">
                        <?php echo _escape($op['title']); ?>
                    </a>
                <?php } ?>
            </dd>
        </dl>
<?php
    }
?>
    </div>
<?php
    if ($paginator) {
        echo $this->pagination($paginator);
    }
} else {
    _e('No comments available yet.');
}
?>