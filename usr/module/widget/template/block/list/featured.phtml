<?php
$options = (array) $block['options'];
$items   = (array) $block['items'];
$width   = empty($options['width']) ? 100 : $options['width'];
$height  = empty($options['height']) ? 100 : $options['height'];
$rows    = empty($options['max_rows']) ? 2 : $options['max_rows'];
$target  = empty($options['target']) ? '_blank' : $options['target'];
?>
<div class="widget-list widget-list-feature">
    <?php foreach($items as $item) { ?>
    <div class="media">
        <?php
            echo sprintf(
                '<a href="%s" title="%s" class="pull-left" target="%s">
                    <img src="%s" class="img-responsive" alt="%s" style="width:%spx; height:%spx">
                </a>',
                $item['link'],
                $item['caption'],
                $target,
                $item['image'],
                $item['caption'],
                $width,
                $height
            );
        ?>
        <div class="media-body">
            <h4 class="media-heading">
                <a href="<?php echo _escape($item['link']); ?>" 
                   title="<?php echo _escape($item['caption']); ?>"
                   class="pi-ellipsis pi-ellipsis-1"
                   target="<?php echo _escape($target); ?>">
                    <?php echo _escape($item['caption']); ?>
                </a>
            </h4>
            <?php
                $htmlDetail = '';
                if (!empty($item['detail'])) {
                    $htmlDetail = sprintf(
                        '<span class="pull-right"><a href="%s" target="%s">%s</a></span>',
                        $item['detail'],
                        $target,
                        __('Detail')
                    );
                }
                echo sprintf(
                    '<div class="pi-ellipsis pi-ellipsis-%s">%s%s</div>',
                    $rows,
                    $item['desc'],
                    $htmlDetail
                );
            ?>
        </div>
    </div>
    <?php } ?>
</div>
